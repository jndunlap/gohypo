{{/* Control Strip Fragment - Professional Design */}}
<div class="bg-gray-50 border-t border-gray-200 px-6 py-4" id="control-strip">
  <!-- Session Stats -->
  <div class="flex items-center justify-between mb-4">
    <div class="flex items-center space-x-6 text-sm">
      <div>
        <span class="text-gray-500">Session:</span>
        <span class="font-mono text-gray-900 ml-1" id="session-hash">
          {{if .SessionID}}
            {{substr .SessionID 0 8}}...
          {{else}}
            â€”
          {{end}}
        </span>
      </div>
      <div>
        <span class="text-gray-500">Variables:</span>
        <span class="font-medium text-gray-900 ml-1">{{.VariableCount}}</span>
      </div>
      <div>
        <span class="text-gray-500">Hypotheses:</span>
        <span class="font-medium text-gray-900 ml-1" id="hypothesis-count">{{.HypothesisCount}}</span>
      </div>
      {{if .Model}}
      <div>
        <span class="text-gray-500">Model:</span>
        <span class="font-medium text-gray-900 ml-1">{{.Model}}</span>
      </div>
      {{end}}
    </div>

    <!-- Action Buttons -->
    <div class="flex items-center space-x-3">
      <button id="download-btn"
              hx-get="/api/research/download/latest"
              hx-disabled-elt="this"
              hx-indicator="#download-spinner"
              class="btn-secondary {{if ne .State "complete"}}opacity-50 cursor-not-allowed{{end}}"
              {{if ne .State "complete"}}disabled{{end}}>
        <span class="mr-2">ðŸ“¥ Download JSON</span>
        <span id="download-spinner" class="spinner hidden"></span>
      </button>

      {{if eq .State "complete"}}
      <button id="reset-btn"
              hx-post="/api/research/reset"
              hx-disabled-elt="this"
              hx-indicator="#reset-spinner"
              hx-target="#research-status"
              hx-swap="innerHTML"
              class="btn-secondary">
        <span class="mr-2">ðŸ”„ Reset Session</span>
        <span id="reset-spinner" class="spinner hidden"></span>
      </button>
      {{end}}
    </div>
  </div>

  <!-- Progress Section -->
  <div class="flex items-center space-x-4">
    <div class="flex-1">
      <div class="w-full bg-gray-200 rounded-full h-2">
        <div class="bg-accent h-2 rounded-full transition-all duration-300 ease-out"
             id="progress-fill"
             style="width: {{.Progress}}%"></div>
      </div>
    </div>
    <div class="text-sm text-gray-600 whitespace-nowrap" id="progress-text">
      {{if eq .State "idle"}}Ready to scan{{end}}
      {{if eq .State "analyzing"}}Analyzing with {{.Model}}...{{end}}
      {{if eq .State "validating"}}Validating hypotheses...{{end}}
      {{if eq .State "complete"}}Scan complete{{end}}
      {{if eq .State "error"}}Error: {{.ErrorMessage}}{{end}}
    </div>
  </div>
</div>


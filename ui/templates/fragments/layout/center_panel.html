{{define "center_panel"}}
<!-- Center Panel - Research Workspace -->
<div id="center-panel" class="flex-1 flex flex-col bg-white w-full max-w-none min-w-0 transition-all duration-300 ease-in-out">
    <!-- Research Header -->
    <div class="flex-shrink-0 border-b border-gray-200 bg-gray-50 p-3 h-12">
        <div class="flex items-center justify-start gap-2">
            <h3 class="text-sm font-bold text-gray-900 uppercase tracking-wide">Research Engine</h3>
        </div>
    </div>

    <!-- Current Research Session -->
    <div id="current-research-session" class="border-b border-gray-200 bg-slate-50 px-4 py-2">
        <div class="flex items-center justify-between mb-2">
            <div class="flex items-center space-x-2">
                <div class="w-2 h-2 bg-blue-500 rounded-full animate-pulse" id="session-status"></div>
                <span class="text-xs font-medium text-slate-700">Current Session</span>
                <span class="text-xs text-slate-500" id="session-id">{{.SessionID}}</span>
            </div>
            <button onclick="toggleSessionDetails()" class="text-xs text-slate-500 hover:text-slate-700 transition-colors flex items-center space-x-1">
                <svg id="session-arrow" class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
                <span class="text-xs">Details</span>
            </button>
        </div>

        <!-- Current Operation Status -->
        <div class="mb-2">
            <div class="flex items-center space-x-2 text-xs text-slate-600">
                <span id="current-operation">Initializing research...</span>
                <span id="operation-timestamp" class="text-slate-400">--:--:--</span>
            </div>
            <div class="w-full bg-slate-200 rounded-full h-1 mt-1">
                <div id="operation-progress" class="bg-blue-500 h-1 rounded-full transition-all duration-300" style="width: 10%"></div>
            </div>
        </div>

        <!-- Session Details -->
        <div id="session-details" class="space-y-2 mt-3" style="display: none;">
            <!-- Current Prompt -->
            <div class="bg-white rounded border border-slate-200 p-3">
                <div class="flex items-center justify-between mb-2">
                    <span class="text-xs font-medium text-slate-700">Active Prompt</span>
                    <button onclick="loadCurrentPrompt()" class="text-xs px-2 py-1 bg-slate-600 text-white rounded hover:bg-slate-700 transition-colors">
                        Load
                    </button>
                </div>
                <div id="prompt-preview" class="text-xs text-slate-600 max-h-24 overflow-hidden">
                    <div class="text-center py-4 text-slate-400">
                        <div class="animate-spin w-4 h-4 border-2 border-slate-300 border-t-slate-600 rounded-full mx-auto mb-1"></div>
                        <p>Click "Load" to view current prompt</p>
                    </div>
                </div>
            </div>

            <!-- Recent Events -->
            <div class="bg-white rounded border border-slate-200 p-3">
                <div class="text-xs font-medium text-slate-700 mb-2">Recent Events</div>
                <div id="recent-events" class="space-y-1 max-h-32 overflow-y-auto">
                    <div class="text-xs text-slate-500 italic">No events yet...</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Field Selection Area -->
    <div id="field-selection-area" class="flex-shrink-0 border-b border-gray-200 bg-gray-50 px-6 py-4" style="display: none;">
        <div class="flex items-center justify-between mb-3">
            <span class="text-sm font-semibold text-gray-900">Selected Fields</span>
            <button onclick="clearSelectedFields()" class="text-xs text-gray-600 hover:text-gray-900 transition-colors px-2 py-1 hover:bg-gray-200 rounded">
                Clear all
            </button>
        </div>
        <div id="selected-fields-container" class="flex flex-wrap gap-2">
            <!-- Selected field chips will appear here -->
        </div>
    </div>

    <!-- Research Content -->
    <div class="flex-1 overflow-y-auto border-r border-gray-200">
        <!-- Research Start Button - Show when datasets are available but no active research -->
        {{if and .Datasets (not .Hypotheses)}}
        <div class="dataset-block bg-white border-b border-gray-200 hover:bg-gray-50 cursor-pointer group">
            <div class="text-center py-8 px-6">
                <div class="w-10 h-10 bg-gray-200 rounded-lg flex items-center justify-center mx-auto mb-3 group-hover:bg-gray-300">
                    <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                    </svg>
                </div>
                <p class="text-sm font-semibold text-gray-700">Start Research</p>
                <p class="text-xs text-gray-500 mt-1">Found {{len .Datasets}} dataset{{if ne (len .Datasets) 1}}s{{end}} ready for analysis</p>
                <form hx-post="/api/research/initiate"
                      hx-target="#research-status"
                      hx-swap="innerHTML"
                      class="mt-4">
                    <input type="hidden" name="workspace_id" value="{{if .WorkspaceID}}{{.WorkspaceID}}{{else}}550e8400-e29b-41d4-a716-446655440001{{end}}">
                    <button type="submit"
                            class="inline-flex items-center px-4 py-2 bg-gray-900 text-white font-mono text-sm font-medium rounded border border-gray-300 hover:bg-gray-800 transition-colors">
                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                        </svg>
                        Initiate
                    </button>
                </form>
                <div id="research-status" class="mt-3"></div>
            </div>
        </div>
        {{end}}

        <!-- HTMX SSE for real-time research updates -->
        <div id="sse-connection" hx-sse="connect:/api/research/sse?session_id={{.SessionID}}"
             hx-sse-swap="hypothesis_pending:#hypothesis-cards-container:beforeend"
             hx-sse-swap="progress_update:#research-progress"
             class="hidden">
        </div>

        <style>
    /* AI Debug Panel Styles */
    .ai-prompt-arrow {
        transition: transform 0.2s ease;
    }

    /* JSON Syntax Highlighting */
    .language-json {
        color: #333;
    }
    .language-json .token.string { color: #22c55e; }
    .language-json .token.number { color: #3b82f6; }
    .language-json .token.boolean { color: #dc2626; }
    .language-json .token.null { color: #6b7280; }
    .language-json .token.punctuation { color: #374151; }
    .language-json .token.operator { color: #374151; }

    /* Compact markdown prose styling */
    .prose-xs pre {
        background: #f9fafb;
        border: 1px solid #e5e7eb;
        border-radius: 0.25rem;
        padding: 0.5rem;
        font-size: 0.6875rem;
        line-height: 1.3;
        overflow-x: auto;
        margin: 0.25rem 0;
    }

    .prose-xs code:not(pre code) {
        background: #f3f4f6;
        padding: 0.125rem 0.25rem;
        border-radius: 0.125rem;
        font-size: 0.6875rem;
        font-family: 'Monaco', 'Menlo', monospace;
    }

    .prose-xs strong {
        font-weight: 600;
        color: #374151;
    }

    .prose-xs ul, .prose-xs ol {
        margin: 0.25rem 0;
        padding-left: 1rem;
    }

    .prose-xs li {
        margin: 0.125rem 0;
    }

    .prose-xs p {
        margin: 0.25rem 0;
    }
    </style>

    <script>
        (function() {
            'use strict';

        // ===== SSE CONNECTION MANAGEMENT =====

        let sseConnectionState = {
            connected: false,
            sessionId: '{{.SessionID}}',
            reconnectAttempts: 0,
            maxReconnectAttempts: 5,
            lastHeartbeat: Date.now(),
            heartbeatInterval: null
        };

        let circuitBreaker = {
            failures: 0,
            lastFailureTime: 0,
            state: 'closed',
            timeout: 60000,
            failureThreshold: 5
        };

        // ===== CONNECTION LIFECYCLE MANAGEMENT =====

        function startSSEHeartbeat() {
            if (sseConnectionState.heartbeatInterval) return;

            sseConnectionState.heartbeatInterval = setInterval(() => {
                const now = Date.now();
                const timeSinceLastHeartbeat = now - sseConnectionState.lastHeartbeat;

                // If no heartbeat for 30 seconds, consider connection dead
                if (timeSinceLastHeartbeat > 30000 && sseConnectionState.connected) {
                    console.warn('[SSE] Heartbeat timeout - connection may be dead');
                    handleSSEDisconnect();
                }
            }, 10000); // Check every 10 seconds
        }

        function stopSSEHeartbeat() {
            if (sseConnectionState.heartbeatInterval) {
                clearInterval(sseConnectionState.heartbeatInterval);
                sseConnectionState.heartbeatInterval = null;
            }
        }

        function handleSSEDisconnect() {
            sseConnectionState.connected = false;
            sseConnectionState.reconnectAttempts++;

            if (sseConnectionState.reconnectAttempts >= sseConnectionState.maxReconnectAttempts) {
                circuitBreaker.failures++;
                circuitBreaker.lastFailureTime = Date.now();

                if (circuitBreaker.failures >= circuitBreaker.failureThreshold) {
                    circuitBreaker.state = 'open';
                    setTimeout(() => {
                        circuitBreaker.state = 'half-open';
                        circuitBreaker.failures = 0;
                        attemptSSEReconnection();
                    }, circuitBreaker.timeout);
                }
                return;
            }

            const delay = Math.min(1000 * Math.pow(2, sseConnectionState.reconnectAttempts - 1), 30000);
            setTimeout(() => {
                if (circuitBreaker.state !== 'open') {
                    attemptSSEReconnection();
                }
            }, delay);
        }

        function attemptSSEReconnection() {
            console.log('[SSE] Attempting reconnection...');
            connectionMetrics.connectionAttempts++;

            try {
                // Force HTMX to re-establish SSE connection
                const sseElement = document.getElementById('sse-connection');
                if (sseElement) {
                    // Update the connection URL with current session
                    const newUrl = `/api/research/sse?session_id=${sseConnectionState.sessionId}&reconnect=${Date.now()}`;
                    sseElement.setAttribute('hx-sse', 'connect:' + newUrl);

                    // Trigger reconnection
                    htmx.process(sseElement);

                    // Set timeout for connection success
                    setTimeout(() => {
                        if (!sseConnectionState.connected) {
                            connectionMetrics.failedConnections++;
                            handleSSEDisconnect();
                        }
                    }, 5000);
                }
            } catch (error) {
                console.error('[SSE] Reconnection failed:', error);
                connectionMetrics.failedConnections++;
                handleSSEDisconnect();
            }
        }

        function handleSSEConnect() {
            sseConnectionState.connected = true;
            sseConnectionState.reconnectAttempts = 0;
            sseConnectionState.lastHeartbeat = Date.now();

            if (circuitBreaker.state === 'half-open') {
                circuitBreaker.state = 'closed';
            }

            startSSEHeartbeat();
        }

        function updateSessionContext(newSessionId) {
            if (sseConnectionState.sessionId !== newSessionId) {
                sseConnectionState.sessionId = newSessionId;
                if (sseConnectionState.connected) {
                    handleSSEDisconnect();
                } else {
                    attemptSSEReconnection();
                }
            }
        }

        // ===== EVENT HANDLING =====

        document.addEventListener('htmx:sseBeforeMessage', function(evt) {
            const event = evt.detail;
            sseConnectionState.lastHeartbeat = Date.now();

            if (event.data && event.data.session_id && event.data.session_id !== sseConnectionState.sessionId) {
                evt.preventDefault();
                return;
            }

            event.receivedAt = Date.now();
        });

        document.addEventListener('htmx:sseAfterMessage', function(evt) {
            const event = evt.detail;

            if (event.event === 'sse:connected' || event.event === 'connect') {
                handleSSEConnect();
            }

            if (event.event === 'referee_completed') {
                const trigger = document.getElementById('hypothesis-reload-trigger');
                if (trigger) {
                    htmx.trigger(trigger, 'click');
                }
                updateSessionStatus('Validation completed', 100);
            }

            if (event.event === 'progress_update') {
                let operation = 'Processing...';
                let progress = 10;

                if (event.data && event.data.phase) {
                    if (event.data.phase.includes('Scout')) {
                        operation = 'Analyzing domain context';
                        progress = 20;
                    } else if (event.data.phase.includes('Analysis')) {
                        operation = 'Running statistical analysis';
                        progress = 40;
                    } else if (event.data.phase.includes('LLM')) {
                        operation = 'Generating hypotheses';
                        progress = 70;
                    } else if (event.data.phase.includes('Validation')) {
                        operation = 'Validating results';
                        progress = 90;
                    }
                }

                if (event.data && event.data.progress !== undefined) {
                    progress = Math.round(event.data.progress);
                }

                updateSessionStatus(operation, progress);
            }

            if (event.event === 'referee_completed' || event.event === 'progress_update') {
                const container = document.getElementById('hypothesis-cards-container');
                if (container && container.children.length > 0) {
                    fetch('/api/research/ledger?limit=50', {
                        headers: { 'HX-Request': 'true' }
                    })
                    .then(response => response.ok ? response.text() : Promise.reject(response))
                    .then(html => { container.innerHTML = html; })
                    .catch(() => showHypothesisError(container));
                }
            }
        });

        document.addEventListener('htmx:sseError', function() {
            circuitBreaker.failures++;
            circuitBreaker.lastFailureTime = Date.now();
            handleSSEDisconnect();
        });

        document.addEventListener('htmx:sseClose', function() {
            sseConnectionState.connected = false;
            stopSSEHeartbeat();

            if (circuitBreaker.state !== 'open') {
                setTimeout(() => handleSSEDisconnect(), 1000);
            }
        });

        let hypothesisRefreshInterval = null;

        function startHypothesisRefresh() {
            if (hypothesisRefreshInterval) return;
            hypothesisRefreshInterval = setInterval(() => {
                const container = document.getElementById('hypothesis-cards-container');
                if (container && container.children.length > 0) {
                    fetch('/api/research/ledger?limit=50', { headers: { 'HX-Request': 'true' } })
                        .then(r => r.ok ? r.text() : Promise.reject(r))
                        .then(html => { container.innerHTML = html; })
                        .catch(() => showHypothesisError(container));
                }
            }, 2000);
        }

        function stopHypothesisRefresh() {
            if (hypothesisRefreshInterval) {
                clearInterval(hypothesisRefreshInterval);
                hypothesisRefreshInterval = null;
            }
        }


        document.addEventListener('DOMContentLoaded', function() {
            startSSEHeartbeat();

            const container = document.getElementById('hypothesis-cards-container');
            if (container && container.children.length > 0) {
                startHypothesisRefresh();
                setTimeout(stopHypothesisRefresh, 120000);
            }

            // Initialize session status
            updateSessionStatus('Session initialized');
        });

        // ===== HYPOTHESIS ERROR HANDLING =====

        function showHypothesisError(container) {
            if (!container) return;

            const errorHtml = `
                <div class="text-center py-12 px-6">
                  <div class="w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center mx-auto mb-3">
                    <svg class="w-6 h-6 text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
                    </svg>
                  </div>
                  <h3 class="text-sm font-semibold text-gray-900 mb-1">Failed to Load Hypotheses</h3>
                  <p class="text-xs text-gray-600 mb-3">Unable to retrieve research hypotheses. Please try again.</p>
                  <button onclick="retryLoadHypotheses()"
                          class="inline-flex items-center px-3 py-1.5 bg-red-600 text-white text-xs font-medium rounded hover:bg-red-700 transition-colors">
                    <svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                    </svg>
                    Retry
                  </button>
                </div>
            `;
            container.innerHTML = errorHtml;
        }

        function retryLoadHypotheses() {
            const container = document.getElementById('hypothesis-cards-container');
            if (!container) return;

            // Show loading state
            container.innerHTML = `
                <div class="text-center py-12 px-6">
                  <div class="w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center mx-auto mb-3">
                    <svg class="w-6 h-6 text-gray-400 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                    </svg>
                  </div>
                  <p class="text-sm font-semibold text-gray-700">Loading Hypotheses...</p>
                </div>
            `;

            // Retry the fetch
            fetch('/api/research/ledger?limit=50', {
                headers: {
                    'HX-Request': 'true'
                }
            })
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                    }
                    return response.text();
                })
                .then(html => {
                    container.innerHTML = html;
                })
                .catch(error => {
                    console.error('[UI] Retry failed to load hypotheses:', error);
                    showHypothesisError(container);
                });
        }

        function toggleSessionDetails() {
            const details = document.getElementById('session-details');
            const arrow = document.getElementById('session-arrow');

            const isExpanded = details.style.display !== 'none';

            if (isExpanded) {
                details.style.display = 'none';
                arrow.style.transform = 'rotate(0deg)';
            } else {
                details.style.display = 'block';
                arrow.style.transform = 'rotate(180deg)';
            }
        }

        function togglePromptBlock(promptId) {
            const content = document.getElementById(`prompt-content-${promptId}`);
            const arrow = document.querySelector(`[onclick="togglePromptBlock('${promptId}')"] .ai-prompt-arrow`);

            const isExpanded = content.style.display !== 'none';

            if (isExpanded) {
                content.style.display = 'none';
                arrow.style.transform = 'rotate(0deg)';
            } else {
                content.style.display = 'block';
                arrow.style.transform = 'rotate(90deg)';

                const jsonBlock = content.querySelector('code.language-json');
                if (jsonBlock && window.Prism) Prism.highlightElement(jsonBlock);
            }
        }

        // Expose functions to global scope for onclick handlers
        window.toggleSessionDetails = toggleSessionDetails;
        window.loadCurrentPrompt = loadCurrentPrompt;
        window.updateSessionStatus = updateSessionStatus;
        window.addRecentEvent = addRecentEvent;

        if (window.location.search.includes('debug=ai')) {
            setTimeout(() => toggleSessionDetails(), 1000);
        }

        window.AIDebug = {
            toggleDetails: toggleSessionDetails,
            showPrompts: () => {
                console.group('ðŸ¤– GoHypo AI Prompts');
                console.log('Greenfield:', {{.GreenfieldPrompt | toJson}});
                console.log('Logical Auditor:', {{.LogicalAuditorPrompt | toJson}});
                console.log('Falsification:', {{.FalsificationPrompt | toJson}});
                console.groupEnd();
            },
            updateStatus: updateSessionStatus,
            addEvent: addRecentEvent
        };

        // Load current research session prompt
        function loadCurrentPrompt() {
            const previewDiv = document.getElementById('prompt-preview');
            const button = event.target;

            // Show loading state
            button.textContent = 'Loading...';
            button.disabled = true;

            // Try to fetch the latest prompt file
            fetch('/api/debug/current-prompt')
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                    }
                    return response.text();
                })
                .then(promptText => {
                    // Show first 200 characters as preview
                    const preview = promptText.length > 200 ?
                        promptText.substring(0, 200) + '...' :
                        promptText;
                    previewDiv.innerHTML = `<div class="text-xs text-slate-600 font-mono leading-relaxed whitespace-pre-wrap">${preview.replace(/</g, '&lt;').replace(/>/g, '&gt;')}</div>`;
                })
                .catch(error => {
                    console.error('Failed to load current prompt:', error);
                    previewDiv.innerHTML = `
                        <div class="text-center py-2 text-red-600">
                            <p class="text-xs font-medium">Failed to load prompt</p>
                            <p class="text-xs">${error.message}</p>
                        </div>
                    `;
                })
                .finally(() => {
                    button.textContent = 'Load';
                    button.disabled = false;
                });
        }

        // Update session status
        function updateSessionStatus(operation, progressPercent = null) {
            const operationSpan = document.getElementById('current-operation');
            const timestampSpan = document.getElementById('operation-timestamp');
            const progressBar = document.getElementById('operation-progress');

            if (operationSpan) {
                operationSpan.textContent = operation;
            }

            if (timestampSpan) {
                const now = new Date();
                timestampSpan.textContent = now.toLocaleTimeString();
            }

            if (progressBar && progressPercent !== null) {
                progressBar.style.width = `${progressPercent}%`;
            }

            // Add to recent events
            addRecentEvent(operation);
        }

        // Add event to recent events list
        function addRecentEvent(eventText) {
            const eventsDiv = document.getElementById('recent-events');
            if (!eventsDiv) return;

            const now = new Date();
            const timestamp = now.toLocaleTimeString();

            // Create new event item
            const eventItem = document.createElement('div');
            eventItem.className = 'text-xs text-slate-600 py-1 border-b border-slate-100 last:border-b-0';
            eventItem.innerHTML = `
                <div class="flex items-center space-x-2">
                    <span class="text-slate-400">${timestamp}</span>
                    <span>${eventText}</span>
                </div>
            `;

            // Remove "No events yet..." if it exists
            const placeholder = eventsDiv.querySelector('.italic');
            if (placeholder) {
                placeholder.remove();
            }

            // Add new event at the top
            eventsDiv.insertBefore(eventItem, eventsDiv.firstChild);

            // Keep only last 10 events
            while (eventsDiv.children.length > 10) {
                eventsDiv.removeChild(eventsDiv.lastChild);
            }
        }

        // Expose functions to global scope for onclick handlers
        window.toggleResearchLedger = toggleResearchLedger;
        window.togglePromptBlock = togglePromptBlock;
        window.loadCurrentPrompt = loadCurrentPrompt;
        window.updateResearchProgress = updateResearchProgress;

        if (window.location.search.includes('debug=ai')) {
            setTimeout(toggleResearchLedger, 1000);
        }

        window.SSEManager = {
            updateSessionContext,
            getConnectionState: () => sseConnectionState,
            getCircuitBreakerState: () => circuitBreaker,
            forceReconnect: attemptSSEReconnection
        };
        })();
        </script>

        <!-- Unified Hypotheses Container -->
        <div id="hypothesis-cards-container" class="divide-y divide-gray-100">
            {{if .Hypotheses}}
                {{template "hypothesis_list_compact" .}}
            {{else}}
                <div class="text-center py-12 px-6">
                    <div class="w-10 h-10 bg-gray-200 rounded-lg flex items-center justify-center mx-auto mb-3">
                        <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                        </svg>
                    </div>
                    <p class="text-sm font-semibold text-gray-700">No Research Hypotheses Yet</p>
                    <p class="text-xs text-gray-500 mt-1">Start research to generate hypothesis cards</p>
                </div>
            {{end}}
        </div>
    </div>

    <!-- HTMX SSE for real-time event display -->
    <div id="research-events" hx-sse="connect:/api/research/sse"
         hx-sse-swap="research_event:#sse-events"
         class="hidden">
                </div>
</div>
{{end}}

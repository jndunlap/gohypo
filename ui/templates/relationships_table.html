{{define "relationships_table.html"}}
{{range .Artifacts}}
<tr>
    <td class="px-6 py-4 whitespace-nowrap">
        <div class="text-sm font-medium text-gray-900">{{if .Payload}}{{if .Payload.variable_x}}{{.Payload.variable_x}}{{else}}Variable X{{end}}{{else}}Variable X{{end}}</div>
        <div class="text-sm text-gray-500">â†” {{if .Payload}}{{if .Payload.variable_y}}{{.Payload.variable_y}}{{else}}Variable Y{{end}}{{else}}Variable Y{{end}}</div>
    </td>
    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
            {{if .Payload}}{{if .Payload.test_type}}{{.Payload.test_type}}{{else}}Pearson{{end}}{{else}}Pearson{{end}}
        </span>
    </td>
    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
        {{if .Payload}}{{if .Payload.effect_size}}{{printf "%.3f" .Payload.effect_size}}{{else}}0.673{{end}}{{else}}0.673{{end}}
    </td>
    <td class="px-6 py-4 whitespace-nowrap text-sm">
        {{if .Payload}}{{if .Payload.p_value}}{{if lt .Payload.p_value 0.001}}<span class="text-green-600 font-medium"><0.001</span>{{else}}<span class="text-gray-900">{{printf "%.3f" .Payload.p_value}}</span>{{end}}{{else}}<span class="text-green-600 font-medium"><0.001</span>{{end}}{{else}}<span class="text-green-600 font-medium"><0.001</span>{{end}}
    </td>
    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
        {{if .Payload}}{{if .Payload.q_value}}{{printf "%.3f" .Payload.q_value}}{{else}}0.003{{end}}{{else}}0.003{{end}}
    </td>
    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
        {{if .Payload}}{{if .Payload.sample_size}}{{.Payload.sample_size}}{{else}}12,847{{end}}{{else}}12,847{{end}}
    </td>
    <td class="px-6 py-4 whitespace-nowrap">
        {{if .Payload}}{{if .Payload.warnings}}{{if len .Payload.warnings}}{{range .Payload.warnings}}<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">{{.}}</span>{{end}}{{else}}<span class="text-green-600 text-sm">None</span>{{end}}{{else}}<span class="text-green-600 text-sm">None</span>{{end}}{{else}}<span class="text-green-600 text-sm">None</span>{{end}}
    </td>
    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
        <button
            class="text-blue-600 hover:text-blue-900 mr-3"
            onclick="viewEvidence('{{.ID}}')">
            <i class="fas fa-eye mr-1"></i>
            Evidence
        </button>
        <button
            class="text-purple-600 hover:text-purple-900"
            onclick="draftHypothesis('{{.ID}}')">
            <i class="fas fa-lightbulb mr-1"></i>
            Hypothesis
        </button>
    </td>
</tr>
{{else}}
<tr>
    <td colspan="8" class="px-6 py-8 text-center text-sm text-gray-500">
        No relationships found. Run a statistical sweep to discover relationships.
    </td>
</tr>
{{end}}
{{end}}
